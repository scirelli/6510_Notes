<HTML><HEAD><TITLE>All_About_Your_1541-Online-Help Version 0.23</TITLE></HEAD>
<BODY><PRE>

 $EC9E/60574:   Load dir

Jump from <A HREF="RO41DA55.HTM">$DAA7</A>:

EC9E: A9 00     LDA #$00
ECA0: 85 83     STA <A HREF="RA4183.HTM">$83</A>         ; secondary address 0
ECA2: A9 01     LDA #$01
ECA4: 20 E2 D1  JSR <A HREF="RO41D1E2.HTM">$D1E2</A>       ; find channel and buffer
ECA7: A9 00     LDA #$00
ECA9: 20 C8 D4  JSR <A HREF="RO41D4C8.HTM">$D4C8</A>       ; initialize buffer pointer
ECAC: A6 82     LDX <A HREF="RA4182.HTM">$82</A>         ; channel number
ECAE: A9 00     LDA #$00
ECB0: 9D 44 02  STA <A HREF="RA410244.HTM">$0244</A>,X     ; pointer to end = zero
ECB3: 20 93 DF  JSR <A HREF="RO41DF93.HTM">$DF93</A>       ; get buffer number
ECB6: AA        TAX
ECB7: A5 7F     LDA <A HREF="RA417F.HTM">$7F</A>         ; drive number
ECB9: 9D 5B 02  STA <A HREF="RA41025B.HTM">$025B</A>,X     ; bring in table
ECBC: A9 01     LDA #$01        ; 1
ECBE: 20 F1 CF  JSR <A HREF="RO41CFF1.HTM">$CFF1</A>       ; write in buffer
ECC1: A9 04     LDA #$04        ; 4, start address $0401
ECC3: 20 F1 CF  JSR <A HREF="RO41CFF1.HTM">$CFF1</A>       ; write in buffer
ECC6: A9 01     LDA #$01        ; 2 times 1
ECC8: 20 F1 CF  JSR <A HREF="RO41CFF1.HTM">$CFF1</A>
ECCB: 20 F1 CF  JSR <A HREF="RO41CFF1.HTM">$CFF1</A>       ; write in buffer as link address
ECCE: AD 72 02  LDA <A HREF="RA410272.HTM">$0272</A>       ; drive number
ECD1: 20 F1 CF  JSR <A HREF="RO41CFF1.HTM">$CFF1</A>       ; write in buffer as line number
ECD4: A9 00     LDA #$00        ; line number hi
ECD6: 20 F1 CF  JSR <A HREF="RO41CFF1.HTM">$CFF1</A>       ; in buffer
ECD9: 20 59 ED  JSR <A HREF="RO41ED59.HTM">$ED59</A>       ; directory entry in buffer
ECDC: 20 93 DF  JSR <A HREF="RO41DF93.HTM">$DF93</A>       ; get buffer number
ECDF: 0A        ASL
ECE0: AA        TAX
ECE1: D6 99     DEC <A HREF="RA4199.HTM">$99</A>,X       ; decrement buffer pointer
ECE3: D6 99     DEC <A HREF="RA4199.HTM">$99</A>,X
ECE5: A9 00     LDA #$00
ECE7: 20 F1 CF  JSR <A HREF="RO41CFF1.HTM">$CFF1</A>       ; 0 as line end in buffer

Jump from $ED0B, <A HREF="RO41ED67.HTM">$ED7F</A>:

ECEA: A9 01     LDA #$01
ECEC: 20 F1 CF  JSR <A HREF="RO41CFF1.HTM">$CFF1</A>       ; 2 times 1 as link address
ECEF: 20 F1 CF  JSR <A HREF="RO41CFF1.HTM">$CFF1</A>
ECF2: 20 CE C6  JSR <A HREF="RO41C6CE.HTM">$C6CE</A>       ; directory entry in buffer
ECF5: 90 2C     BCC <A HREF="RO41ED23.HTM">$ED23</A>       ; another entry?
ECF7: AD 72 02  LDA <A HREF="RA410272.HTM">$0272</A>       ; block number lo
ECFA: 20 F1 CF  JSR <A HREF="RO41CFF1.HTM">$CFF1</A>       ; in buffer
ECFD: AD 73 02  LDA <A HREF="RA410272.HTM">$0273</A>       ; block number hi
ED00: 20 F1 CF  JSR <A HREF="RO41CFF1.HTM">$CFF1</A>       ; in buffer
ED03: 20 59 ED  JSR <A HREF="RO41ED59.HTM">$ED59</A>       ; directory entry in buffer
ED06: A9 00     LDA #$00
ED08: 20 F1 CF  JSR <A HREF="RO41CFF1.HTM">$CFF1</A>       ; zero as end marker in buffer
ED0B: D0 DD     BNE $ECEA       ; buffer full? no

Jump from <A HREF="RO41ED23.HTM">$ED56</A>:

ED0D: 20 93 DF  JSR <A HREF="RO41DF93.HTM">$DF93</A>       ; get buffer number
ED10: 0A        ASL
ED11: AA        TAX
ED12: A9 00     LDA #$00
ED14: 95 99     STA <A HREF="RA4199.HTM">$99</A>,X       ; buffer pointer to zero
ED16: A9 88     LDA #$88        ; set READ flag
ED18: A4 82     LDY <A HREF="RA4182.HTM">$82</A>         ; channel number
ED1A: 8D 54 02  STA <A HREF="RA410254.HTM">$0254</A>
ED1D: 99 F2 00  STA <A HREF="RA41F2.HTM">$F2</A>,Y       ; flag for channel
ED20: A5 85     LDA <A HREF="RA4185.HTM">$85</A>         ; data byte
ED22: 60        RTS

    <A HREF="RO41EBFF.HTM">Previous Page</A> / <A HREF="RO41ED23.HTM">Next Page</A>

</PRE></BODY></HTML>
